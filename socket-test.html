<!DOCTYPE html>
<html>
  <head>
    <title>Socket.IO Test</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  </head>
  <body>
    <h1>Socket.IO Connection Test</h1>
    <div id="status">Connecting...</div>
    <div id="logs"></div>

    <script>
      const socket = io("http://localhost:3001");
      const status = document.getElementById("status");
      const logs = document.getElementById("logs");

      function addLog(message) {
        const div = document.createElement("div");
        div.textContent = new Date().toLocaleTimeString() + ": " + message;
        logs.appendChild(div);
      }

      socket.on("connect", () => {
        status.textContent = "✅ Connected! Socket ID: " + socket.id;
        addLog("Connected to server");

        // Test tutor availability
        socket.emit("tutor:set-available", {
          address: "0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",
          languages: ["English", "Spanish"],
          rates: { English: 50, Spanish: 50 },
        });
        addLog("Sent tutor:set-available event");
      });

      socket.on("disconnect", () => {
        status.textContent = "❌ Disconnected";
        addLog("Disconnected from server");
      });

      socket.on("tutor:availability-confirmed", (data) => {
        addLog(
          "Received tutor:availability-confirmed: " + JSON.stringify(data)
        );
      });

      socket.on("error", (error) => {
        addLog("Error: " + JSON.stringify(error));
      });
    </script>
  </body>
</html>
